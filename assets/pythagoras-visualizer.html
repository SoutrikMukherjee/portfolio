<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pythagoras Common Divisor Visualizer</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #fff;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 {
            font-size: 2.0em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .header p { font-size: 1.05em; opacity: 0.9; max-width: 680px; margin: 0 auto; }
        .main-content { display: grid; grid-template-columns: 1fr 360px; gap: 24px; margin-bottom: 10px; }
        .visualization-panel, .info-panel {
            background: rgba(0, 0, 0, 0.25);
            border-radius: 15px; padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        canvas {
            width: 100%; height: 500px; border-radius: 10px;
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.1), rgba(0,0,0,0.3));
            cursor: crosshair;
        }
        .controls { margin-top: 16px; display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
        .btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52); border: none; color: white;
            padding: 10px 18px; border-radius: 22px; cursor: pointer; font-size: 14px; font-weight: 600;
            transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4); }
        .btn.secondary { background: linear-gradient(45deg, #4ecdc4, #44a08d); box-shadow: 0 4px 15px rgba(78, 205, 196, 0.3); }
        .btn.secondary:hover { box-shadow: 0 6px 20px rgba(78, 205, 196, 0.4); }
        .btn.accent { background: linear-gradient(45deg, #ffe66d, #ff9500); box-shadow: 0 4px 15px rgba(255, 230, 109, 0.3); color:#1a1a1a; }
        .btn.accent:hover { box-shadow: 0 6px 20px rgba(255, 230, 109, 0.4); }
        .mathematical-info { margin-bottom: 18px; }
        .mathematical-info h3 { color: #ffd700; margin-bottom: 10px; font-size: 1.15em; }
        .equation { background: rgba(255,215,0,0.1); border-left: 3px solid #ffd700; padding: 12px; margin: 8px 0;
                   border-radius: 5px; font-family: 'Courier New', monospace; font-size: 1.0em; }
        .result-display { background: rgba(78,205,196,0.2); border-radius: 10px; padding: 16px; margin-top: 14px;
                          border: 1px solid rgba(78,205,196,0.5); }
        .legend { display: flex; flex-direction: column; gap: 8px; margin-top: 12px; }
        .legend-item { display: flex; align-items: center; gap: 10px; padding: 8px; background: rgba(255,255,255,0.1); border-radius: 8px; }
        .legend-color { width: 18px; height: 18px; border-radius: 50%; box-shadow: 0 2px 8px rgba(0,0,0,0.3); }
        .progress-bar { width: 100%; height: 6px; background: rgba(255,255,255,0.2); border-radius: 3px; margin: 10px 0; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #ff6b6b, #4ecdc4); border-radius: 3px; transition: width 0.3s ease; }
        @media (max-width: 900px) { .main-content { grid-template-columns: 1fr; } .btn { font-size: 12px; padding: 9px 16px; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Interactive Mathematical Visualization</h1>
            <p>Exploring Common Divisors Through Line Segment Analysis — a compact, mobile‑friendly GCD visualizer.</p>
        </div>

        <div class="main-content">
            <div class="visualization-panel">
                <canvas id="canvas" width="800" height="400" aria-label="Pythagoras GCD Visualizer"></canvas>
                <div class="controls" role="group" aria-label="Controls">
                    <button class="btn" onclick="setXY(1)">XY = 1 inch</button>
                    <button class="btn secondary" onclick="setXY(2)">XY = 2 inches</button>
                    <button class="btn accent" onclick="toggleAnimation()">Animate</button>
                    <button class="btn" onclick="toggleDivisions()">Toggle Divisions</button>
                    <button class="btn secondary" onclick="showStepByStep()">Step-by-Step</button>
                </div>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: linear-gradient(45deg, #ff6b6b, #ee5a52);"></div>
                        <span>Line AB: 36 inches</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: linear-gradient(45deg, #4ecdc4, #44a08d);"></div>
                        <span>Line CD: 10 inches</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: linear-gradient(45deg, #ffe66d, #ff9500);"></div>
                        <span>Line XY: Variable length</span>
                    </div>
                </div>
            </div>

            <div class="info-panel">
                <div class="mathematical-info">
                    <h3>Mathematical Problem</h3>
                    <p>Find the length of line segment XY such that:</p>
                    <div class="equation">
                        m × XY = 36 inches<br>
                        n × XY = 10 inches<br>
                        where m, n ∈ ℤ⁺
                    </div>
                    
                    <h3>Solution Process</h3>
                    <p>XY must be a common divisor of both 36 and 10.</p>
                    <div class="equation">
                        GCD(36, 10) = 2<br>
                        Divisors of 36: 1, 2, 3, 4, 6, 9, 12, 18, 36<br>
                        Divisors of 10: 1, 2, 5, 10<br>
                        Common divisors: <strong>1, 2</strong>
                    </div>
                </div>

                <div class="result-display" aria-live="polite">
                    <h4>Current Analysis</h4>
                    <p><strong>XY Length:</strong> <span id="currentXY">2</span> inches</p>
                    <p><strong>Segments in AB:</strong> <span id="segmentsAB">18</span></p>
                    <p><strong>Segments in CD:</strong> <span id="segmentsCD">5</span></p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 100%;"></div>
                    </div>
                    <p id="validationText">✓ Valid solution: Both divisions result in whole numbers</p>
                </div>

                <div class="mathematical-info">
                    <h3>Educational Value</h3>
                    <p>This visualization helps students understand:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Greatest Common Divisor (GCD)</li>
                        <li>Factor relationships</li>
                        <li>Division and remainders</li>
                        <li>Constraint satisfaction</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        let currentXY = 2;
        let showDivisions = false;
        let isAnimating = false;
        let animationId = null;
        let stepMode = false;
        
        const scale = 8;
        const margin = 50;

        function drawGradientLine(x1, y1, x2, y2, color1, color2, width = 6) {
            const gradient = ctx.createLinearGradient(x1, y1, x2, y2);
            gradient.addColorStop(0, color1);
            gradient.addColorStop(1, color2);
            
            ctx.strokeStyle = gradient;
            ctx.lineWidth = width;
            ctx.lineCap = 'round';
            ctx.beginPath();
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.stroke();
            
            const endpointGradient = ctx.createRadialGradient(x1, y1, 0, x1, y1, 8);
            endpointGradient.addColorStop(0, color1);
            endpointGradient.addColorStop(1, color2);
            
            ctx.fillStyle = endpointGradient;
            ctx.beginPath();
            ctx.arc(x1, y1, 8, 0, 2 * Math.PI);
            ctx.fill();
            
            ctx.beginPath();
            ctx.arc(x2, y2, 8, 0, 2 * Math.PI);
            ctx.fill();
        }

        function drawLabel(x, y, text, color = '#ffffff') {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
            ctx.font = 'bold 16px Segoe UI';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(text, x + 1, y + 1);
            ctx.fillStyle = color;
            ctx.fillText(text, x, y);
        }

        function drawDivisionMarks(x, y, length, divisions, color) {
            if (!showDivisions) return;
            const segmentLength = (length * scale) / divisions;
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.setLineDash([]);
            for (let i = 1; i < divisions; i++) {
                const markX = x + i * segmentLength;
                ctx.beginPath();
                ctx.moveTo(markX, y - 15);
                ctx.lineTo(markX, y + 15);
                ctx.stroke();
                ctx.fillStyle = color;
                ctx.font = '12px Segoe UI';
                ctx.textAlign = 'center';
                ctx.fillText(i.toString(), markX, y - 25);
            }
        }

        function drawPulsingEffect(x, y, radius, color) {
            const time = Date.now() * 0.003;
            const pulseRadius = radius + Math.sin(time) * 3;
            const gradient = ctx.createRadialGradient(x, y, 0, x, y, pulseRadius);
            gradient.addColorStop(0, color + '40');
            gradient.addColorStop(1, color + '00');
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(x, y, pulseRadius, 0, 2 * Math.PI);
            ctx.fill();
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.lineWidth = 1;
            for (let i = 0; i < canvas.width; i += 40) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, canvas.height);
                ctx.stroke();
            }
            for (let i = 0; i < canvas.height; i += 40) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(canvas.width, i);
                ctx.stroke();
            }

            const abX1 = margin;
            const abY = 120;
            const abX2 = abX1 + 36 * scale;
            drawGradientLine(abX1, abY, abX2, abY, '#ff6b6b', '#ee5a52');
            drawLabel(abX1 - 25, abY, 'A', '#ff6b6b');
            drawLabel(abX2 + 25, abY, 'B', '#ff6b6b');
            drawLabel((abX1 + abX2) / 2, abY - 35, '36 inches', '#ff6b6b');
            drawDivisionMarks(abX1, abY, 36, 36 / currentXY, '#ff6b6b');

            const cdX1 = margin;
            const cdY = 220;
            const cdX2 = cdX1 + 10 * scale;
            drawGradientLine(cdX1, cdY, cdX2, cdY, '#4ecdc4', '#44a08d');
            drawLabel(cdX1 - 25, cdY, 'C', '#4ecdc4');
            drawLabel(cdX2 + 25, cdY, 'D', '#4ecdc4');
            drawLabel((cdX1 + cdX2) / 2, cdY - 35, '10 inches', '#4ecdc4');
            drawDivisionMarks(cdX1, cdY, 10, 10 / currentXY, '#4ecdc4');

            const xyX1 = margin;
            const xyY = 320;
            const xyX2 = xyX1 + currentXY * scale;
            drawGradientLine(xyX1, xyY, xyX2, xyY, '#ffe66d', '#ff9500');
            drawLabel(xyX1 - 25, xyY, 'X', '#ffe66d');
            drawLabel(xyX2 + 25, xyY, 'Y', '#ffe66d');
            drawLabel((xyX1 + xyX2) / 2, xyY - 35, `${currentXY} inch${currentXY > 1 ? 'es' : ''}`, '#ffe66d');

            if (isAnimating) {
                drawPulsingEffect(xyX1, xyY, 20, '#ffe66d');
                drawPulsingEffect(xyX2, xyY, 20, '#ffe66d');
            }

            ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
            ctx.font = '14px Segoe UI';
            ctx.textAlign = 'left';
            const startX = 450;
            const startY = 150;
            ctx.fillText(`Mathematical Verification:`, startX, startY);
            ctx.fillText(`m = 36 ÷ ${currentXY} = ${36 / currentXY}`, startX, startY + 30);
            ctx.fillText(`n = 10 ÷ ${currentXY} = ${10 / currentXY}`, startX, startY + 50);
            
            const isValid = (36 % currentXY === 0) && (10 % currentXY === 0);
            ctx.fillStyle = isValid ? '#4ecdc4' : '#ff6b6b';
            ctx.fillText(`Result: ${isValid ? 'Valid ✓' : 'Invalid ✗'}`, startX, startY + 80);

            updateUI();
        }

        function updateUI() {
            document.getElementById('currentXY').textContent = currentXY;
            document.getElementById('segmentsAB').textContent = 36 / currentXY;
            document.getElementById('segmentsCD').textContent = 10 / currentXY;
            const isValid = (36 % currentXY === 0) && (10 % currentXY === 0);
            const validationText = document.getElementById('validationText');
            const progressFill = document.getElementById('progressFill');
            if (isValid) {
                validationText.textContent = '✓ Valid solution: Both divisions result in whole numbers';
                validationText.style.color = '#4ecdc4';
                progressFill.style.width = '100%';
            } else {
                validationText.textContent = '✗ Invalid: Divisions do not result in whole numbers';
                validationText.style.color = '#ff6b6b';
                progressFill.style.width = '0%';
            }
        }

        function setXY(length) { currentXY = length; draw(); }
        function toggleDivisions() { showDivisions = !showDivisions; draw(); }
        function toggleAnimation() {
            isAnimating = !isAnimating;
            if (isAnimating) {
                let frame = 0;
                function animate() {
                    if (!isAnimating) return;
                    frame++;
                    if (frame % 120 === 0) currentXY = currentXY === 1 ? 2 : 1;
                    draw();
                    animationId = requestAnimationFrame(animate);
                }
                animate();
            } else if (animationId) { cancelAnimationFrame(animationId); }
        }
        function showStepByStep() {
            stepMode = !stepMode;
            if (stepMode) {
                alert(`Step-by-step analysis:\n\n1. We need XY to divide both 36 and 10 evenly\n2. Factors of 36: 1, 2, 3, 4, 6, 9, 12, 18, 36\n3. Factors of 10: 1, 2, 5, 10\n4. Common factors: 1, 2\n5. Therefore XY can only be 1 or 2 inches\n\nThis demonstrates the concept of Greatest Common Divisor (GCD) visually!`);
            }
        }

        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            if (y > 300 && y < 340 && x > margin && x < margin + 100) {
                currentXY = currentXY === 1 ? 2 : 1;
                draw();
            }
        });

        draw();
    </script>
</body>
</html>
